<style>

body {
  font: 12px 'Lucida Grande', sans-serif;
  margin: 20px;
}

textarea {
  font: 12px Monaco, monospace;
}

</style>
<h2>Input</h2>
<textarea id="input" rows="10" cols="80" autofocus></textarea>
<h2>Output</h2>
<textarea id="output" rows="20" cols="80" readonly></textarea>
<script src="../../build/debug/skewc.js"></script>
<script>

function compile() {
  var source = new Source('<stdin>', input.value);
  var log = new Log();
  var tokens = tokenize(log, source);
  var file = parseFile(log, tokens);
  var text = '';
  for (var i = 0; i < log.diagnostics.length; i++) {
    var diagnostic = log.diagnostics[i];
    var formatted = diagnostic.range.format(80);
    text += diagnostic.range.locationString() + ': ' + diagnostic.text + '\n' + formatted.line + '\n' + formatted.range + '\n';
  }
  if (file) text += dump(file);
  output.value = text;
}

input.oninput = input.onchange = compile;
compile();

</script>
