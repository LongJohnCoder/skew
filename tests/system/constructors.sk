test("
class Foo {
  new() { return 0; }
}
class Bar {
  new() { return 0; foo; }
}
", "
<stdin>:2:18: error: Cannot convert from type \"int\" to type \"void\"
  new() { return 0; }
                 ^
<stdin>:5:18: error: Cannot convert from type \"int\" to type \"void\"
  new() { return 0; foo; }
                 ^
<stdin>:5:21: error: \"foo\" is not declared
  new() { return 0; foo; }
                    ~~~
");

test("
void();
", "
<stdin>:1:1: error: Cannot construct type \"void\"
void();
~~~~
");

test("
void fn()();
", "
<stdin>:1:1: error: Cannot construct type \"void fn()\"
void fn()();
~~~~~~~~~
");

test("
struct Foo {
  new(int x) {}
}
int foo = Foo();
", "
<stdin>:4:14: error: Expected 1 argument but found 0 arguments
int foo = Foo();
             ~~
<stdin>:4:11: error: Cannot convert from type \"Foo\" to type \"int\"
int foo = Foo();
          ~~~~~
");

test("
class Foo {
  new() {}
}
int foo = Foo(1);
", "
<stdin>:4:14: error: Expected 0 arguments but found 1 argument
int foo = Foo(1);
             ~~~
<stdin>:4:11: error: Cannot convert from type \"Foo\" to type \"int\"
int foo = Foo(1);
          ~~~~~~
");

test("
class Foo {}
int foo = Foo(1);
", "
<stdin>:2:14: error: Expected 0 arguments but found 1 argument
int foo = Foo(1);
             ~~~
<stdin>:2:11: error: Cannot convert from type \"Foo\" to type \"int\"
int foo = Foo(1);
          ~~~~~~
");

test("
int i = { 0 };
bool b = { false };
float f = { 0.0f };
double d = { 0.0 };
string s = { \"\" };
", "
<stdin>:1:9: error: Cannot construct type \"int\"
int i = { 0 };
        ~~~~~
<stdin>:2:10: error: Cannot construct type \"bool\"
bool b = { false };
         ~~~~~~~~~
<stdin>:3:11: error: Cannot construct type \"float\"
float f = { 0.0f };
          ~~~~~~~~
<stdin>:4:12: error: Cannot construct type \"double\"
double d = { 0.0 };
           ~~~~~~~
<stdin>:5:12: error: Cannot construct type \"string\"
string s = { \"\" };
           ~~~~~~
");

test("
int i = {};
bool b = {};
float f = {};
double d = {};
string s = {};
", "
<stdin>:1:9: error: Cannot construct type \"int\"
int i = {};
        ~~
<stdin>:2:10: error: Cannot construct type \"bool\"
bool b = {};
         ~~
<stdin>:3:11: error: Cannot construct type \"float\"
float f = {};
          ~~
<stdin>:4:12: error: Cannot construct type \"double\"
double d = {};
           ~~
<stdin>:5:12: error: Cannot construct type \"string\"
string s = {};
           ~~
");

test("
int i = int();
bool b = bool();
float f = float();
double d = double();
string s = string();
", "
<stdin>:1:9: error: Cannot construct type \"int\"
int i = int();
        ~~~
<stdin>:2:10: error: Cannot construct type \"bool\"
bool b = bool();
         ~~~~
<stdin>:3:11: error: Cannot construct type \"float\"
float f = float();
          ~~~~~
<stdin>:4:12: error: Cannot construct type \"double\"
double d = double();
           ~~~~~~
<stdin>:5:12: error: Cannot construct type \"string\"
string s = string();
           ~~~~~~
");

test("
int i = default(int);
bool b = default(bool);
float f = default(float);
double d = default(double);
string s = default(string);
", "
");

test("
void fn() foo = { false };
", "
<stdin>:1:17: error: Cannot construct type \"void fn()\"
void fn() foo = { false };
                ~~~~~~~~~
");

test("
class Foo {
  new(int x) {}
}
Foo foo = { false };
", "
<stdin>:4:13: error: Cannot convert from type \"bool\" to type \"int\" without a cast
Foo foo = { false };
            ~~~~~
");

test("
class Foo {
  new(int x) {}
}
Foo foo = { 0, 1 };
", "
<stdin>:4:11: error: Expected 1 argument but found 2 arguments
Foo foo = { 0, 1 };
          ~~~~~~~~
");

test("
struct Foo {
  static int foo;
  final int bar;
}
Foo foo = { 1, 2 };
", "
<stdin>:5:11: error: Expected 1 argument but found 2 arguments
Foo foo = { 1, 2 };
          ~~~~~~~~
");

test("
class Foo : Bar {
  new(int foo) : super(foo) {}
}
class Bar {
  new(bool foo) {}
}
Foo foo = { false };
Bar bar = { 0 };
", "
<stdin>:2:24: error: Cannot convert from type \"int\" to type \"bool\" without a cast
  new(int foo) : super(foo) {}
                       ~~~
<stdin>:7:13: error: Cannot convert from type \"bool\" to type \"int\" without a cast
Foo foo = { false };
            ~~~~~
<stdin>:8:13: error: Cannot convert from type \"int\" to type \"bool\" without a cast
Bar bar = { 0 };
            ^
");
